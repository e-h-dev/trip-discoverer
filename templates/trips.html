{% extends "base.html" %}
{% block content%}
    <div class="row">
        <div class="hero">
            <div class="opaque"></div>
            <div class="row card-panel search-box">
                <form action="{{ url_for('search') }}" method="POST" class="col s12">
                    <div class="center-align">
                        <div class="input-field input-search col s12 m8">
                            <i class="fas fa-search prefix"></i> 
                            <input type="text" name="query" id="query" minlength="3" class="validate" required>
                            <label for="query" class="dark">Search Trips</label>
                        </div>
                        <div class="col s12 m4">
                            <button type="submit" class="search-btn">
                                <i class="fas fa-search left"></i>
                            </button>
                            <a href="{{ url_for('find_trips') }}" class="red reset-btn">Reset</a>
                        </div>
                    </div>
                </form>
            </div>
            <div class="hero-about">
                <h2>Trip Discoverer</h2>
                <p>
                    {% if session.user %}
                        Welcome to Trip Discoverer! 
                        Discover, and search for trip ideas, from any of our categories.
                        You can add or edit your own trip ideas 
                        for others to discover.
                    {% else %}
                        Trip Discoverer is an easy-to-use app. 
                        Discover, and search for trip ideas, from any of our categories. 
                        Why not <em><u><a href="{{ url_for('register') }}" class="par-sign-in"> sign up,</a></u></em>
                         then add and edit your own trip ideas 
                        for others to discover.
                    {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col s10 m6 offset-m3 offset-s1">

            {% if trips|length > 0 %}
            <ul class="collapsible">
                {% for trip in trips %}
                <li>
                    <div class="collapsible-header trip-header">
                        <h4>{{ trip.category_name }}</h4>
                        <span>
                            {% if trip.category_name == "Parks" %}
                                <i class="fa-solid fa-tree"></i>
                            {% elif trip.category_name == "Walks" %}
                                <i class="fa-solid fa-person-walking"></i>
                            {% elif trip.category_name == "Beach" %}
                            <i class="fa-solid fa-umbrella-beach"></i>
                            {% elif trip.category_name == "Museums" %}
                                <i class="fa-solid fa-building-columns"></i>
                            {% elif trip.category_name == "Theme Parks" %}
                                <i class="fa-solid fa-truck-monster"></i>
                            {% else %}
                                <i class="fa-solid fa-futbol"></i>
                            {% endif %}
                        </span>
                        <div class="paragraphs">
                            <p class="trip-header-region">{{ trip.trip_name }}</p>
                            <p>{{ trip.region }}</p>
                        </div>
                        <div class="review-stars">
                            {% if trip.trip_rating == "1" %}
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                            {% elif trip.trip_rating == "2" %}
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                            {% elif trip.trip_rating == "3" %}
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                            {% elif trip.trip_rating == "4" %}
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-solid fa-star star-size"></i>
                                <i class="fa-regular fa-star star-size"></i>
                            {% else %}
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                            {% endif %}
                        </div>
                    </div>
                    <div class="collapsible-body trip-content">
                        <!-- {{ trip.region }}<br> -->
                        <h4 class="trip-body">{{ trip.trip_name }}</h4>
                        {{ trip.city }}<br>
                        {{ trip.address }}<br>
                        {{ trip.post_code }}<br>
                        {% if trip.trip_description %}
                            <div class="description-block">
                                <h4>Description</h4>
                                {{ trip.trip_description }}
                            </div>
                        {% endif %}
                        {{ trip.trip_review }}<br>
                        {% if trip.website %}
                            <a href="{{ trip.website }}" class="btn-large web-btn" target="_blank">Website</a>
                        {% endif %}
                        <p><em>Trip added by: {{ trip.created_by }}</em></p>
                        {% if session.user|lower == trip.created_by|lower %}
                            <!-- edit trip button -->
                            <a href="{{ url_for('edit_trip', trip_id=trip._id)}}" 
                                class="btn-large btn">Edit Trip <i class="fa-regular fa-keyboard"></i></a>
                            <!-- delete trip div -->
                            <div class="delete-confirm btn-large cancel-btn" id="delete-confirm">
                                Delete Trip <i class="fa-solid fa-trash"></i>
                            </div>
                        {% elif session.user|lower == "admin"|lower%}
                            <a href="{{ url_for('edit_trip', trip_id=trip._id)}}" 
                                class="btn-large btn">Edit Trip <i class="fa-regular fa-keyboard"></i></a>
                            <div class="delete-confirm btn-large cancel-btn">Delete Trip <i class="fa-solid fa-trash"></i></div>
                            
                        {% endif %}
                    </div>
                </li>
                {% endfor %}
            </ul>
            {% else %}
                <h3 class="empty-search">
                    No Trips found! <a href="{{ url_for('find_trips') }}">Search Again</a>
                </h3>
            {% endif %}
        </div>
        
    

{% endblock %}
